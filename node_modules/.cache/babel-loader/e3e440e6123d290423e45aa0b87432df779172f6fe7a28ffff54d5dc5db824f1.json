{"ast":null,"code":"import React, { useState, useEffect } from 'react';\nvar styles = {\n  \"alertDangerContainer\": \"_1alIC\",\n  \"alertDangerHeading\": \"_nqCmj\",\n  \"alertDangerInfo\": \"_2Qem8\"\n};\nvar Alert = function Alert(_ref) {\n  var txtMainHeading = _ref.txtMainHeading,\n    customClassName = _ref.customClassName,\n    txtSubHeading = _ref.txtSubHeading,\n    alertStyles = _ref.alertStyles;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: alertStyles.alertDangerContainer + \" \" + customClassName\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: alertStyles.alertDangerHeading\n  }, txtMainHeading), /*#__PURE__*/React.createElement(\"span\", {\n    className: alertStyles.alertDangerInfo\n  }, txtSubHeading));\n};\nvar ReactInternetSpeedMeter = function ReactInternetSpeedMeter(_ref) {\n  var _ref$txtMainHeading = _ref.txtMainHeading,\n    txtMainHeading = _ref$txtMainHeading === void 0 ? 'Opps...' : _ref$txtMainHeading,\n    _ref$outputType = _ref.outputType,\n    outputType = _ref$outputType === void 0 ? 'alert' : _ref$outputType,\n    customClassName = _ref.customClassName,\n    _ref$pingInterval = _ref.pingInterval,\n    pingInterval = _ref$pingInterval === void 0 ? 30000 : _ref$pingInterval,\n    _ref$thresholdUnit = _ref.thresholdUnit,\n    thresholdUnit = _ref$thresholdUnit === void 0 ? 'megabyte' : _ref$thresholdUnit,\n    _ref$threshold = _ref.threshold,\n    threshold = _ref$threshold === void 0 ? 7 : _ref$threshold,\n    _ref$txtSubHeading = _ref.txtSubHeading,\n    txtSubHeading = _ref$txtSubHeading === void 0 ? 'Diconnected from internet' : _ref$txtSubHeading,\n    imageUrl = _ref.imageUrl,\n    downloadSize = _ref.downloadSize,\n    _ref$callbackFunction = _ref.callbackFunctionOnNetworkDown,\n    callbackFunctionOnNetworkDown = _ref$callbackFunction === void 0 ? function () {\n      return console.log('No callback on Network Down');\n    } : _ref$callbackFunction,\n    _ref$callbackFunction2 = _ref.callbackFunctionOnNetworkTest,\n    callbackFunctionOnNetworkTest = _ref$callbackFunction2 === void 0 ? function () {\n      return console.log('No callback On Network test');\n    } : _ref$callbackFunction2,\n    _ref$callbackFunction3 = _ref.callbackFunctionOnError,\n    callbackFunctionOnError = _ref$callbackFunction3 === void 0 ? function () {\n      return console.log('error in downloading image');\n    } : _ref$callbackFunction3;\n  var _useState = useState(false),\n    isNetworkDown = _useState[0],\n    setisNetworkDown = _useState[1];\n  var intervalFun;\n  window.addEventListener('offline', function () {\n    return setisNetworkDown(true);\n  });\n  window.addEventListener('online', function () {\n    return setisNetworkDown(false);\n  });\n  var startCalculating = function startCalculating() {\n    return window.setTimeout(MeasureConnectionSpeed, pingInterval);\n  };\n  useEffect(function () {\n    intervalFun = startCalculating();\n    return function () {\n      return window.clearInterval(intervalFun);\n    };\n  }, []);\n  var MeasureConnectionSpeed = function MeasureConnectionSpeed() {\n    var startTime, endTime;\n    var download = new Image();\n    startTime = new Date().getTime();\n    var cacheBuster = '?nnn=' + startTime;\n    download.src = imageUrl + cacheBuster;\n    download.onload = function (d) {\n      endTime = new Date().getTime();\n      showResults(startTime, endTime);\n    };\n    download.onerror = function (err, msg) {\n      console.log('err', err);\n      callbackFunctionOnError(err);\n      window.clearInterval(intervalFun);\n    };\n    startCalculating();\n  };\n  var showResults = function showResults(startTime, endTime) {\n    var duration = (endTime - startTime) / 1000;\n    var bitsLoaded = downloadSize * 8;\n    var speedBps = (bitsLoaded / duration).toFixed(2);\n    var speedKbps = (speedBps / 1024).toFixed(2);\n    var speedMbps = (speedKbps / 1024).toFixed(2);\n    setNetworStatus(speedBps, speedKbps, speedMbps);\n  };\n  var setNetworStatus = function setNetworStatus(speedBps, speedKbps, speedMbps) {\n    if (thresholdUnit === 'byte') {\n      if (speedBps < threshold) {\n        setisNetworkDown(true);\n        callbackFunctionOnNetworkDown(speedBps);\n      } else {\n        setisNetworkDown(false);\n      }\n      callbackFunctionOnNetworkTest(speedBps);\n    } else if (thresholdUnit === 'kilobyte') {\n      if (speedKbps < threshold) {\n        setisNetworkDown(true);\n        callbackFunctionOnNetworkDown(speedKbps);\n      } else {\n        setisNetworkDown(false);\n      }\n      callbackFunctionOnNetworkTest(speedKbps);\n    } else if (thresholdUnit === 'megabyte') {\n      if (speedMbps < threshold) {\n        setisNetworkDown(true);\n        callbackFunctionOnNetworkDown(speedMbps);\n      } else {\n        setisNetworkDown(false);\n      }\n      callbackFunctionOnNetworkTest(speedMbps);\n    } else {\n      console.log('Invalid thresholdUnit');\n    }\n  };\n  if (isNetworkDown) {\n    if (outputType === 'alert') {\n      return /*#__PURE__*/React.createElement(Alert, {\n        alertStyles: styles,\n        customClassName: customClassName,\n        txtMainHeading: txtMainHeading,\n        txtSubHeading: txtSubHeading\n      });\n    }\n    return /*#__PURE__*/React.createElement(\"div\", null);\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null);\n};\nexport { ReactInternetSpeedMeter };","map":{"version":3,"mappings":"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","names":["Alert","txtMainHeading","customClassName","txtSubHeading","alertStyles","React","className","alertDangerContainer","alertDangerHeading","alertDangerInfo","ReactInternetSpeedMeter","_ref$outputType","outputType","_ref$pingInterval","pingInterval","_ref$thresholdUnit","thresholdUnit","_ref$threshold","threshold","_ref$txtSubHeading","imageUrl","downloadSize","_ref$callbackFunction","callbackFunctionOnNetworkDown","console","log","_ref$callbackFunction2","callbackFunctionOnNetworkTest","_ref$callbackFunction3","callbackFunctionOnError","useState","isNetworkDown","setisNetworkDown","intervalFun","window","addEventListener","startCalculating","setTimeout","MeasureConnectionSpeed","useEffect","clearInterval","startTime","endTime","download","Image","Date","getTime","cacheBuster","src","onload","d","showResults","onerror","err","msg","duration","bitsLoaded","speedBps","toFixed","speedKbps","speedMbps","setNetworStatus","styles"],"sources":["/home/raed/Desktop/Alat Hasibah/node_modules/react-internet-meter/src/components/alerts/index.js","/home/raed/Desktop/Alat Hasibah/node_modules/react-internet-meter/src/index.js"],"sourcesContent":["import React from 'react' \n\n\nconst Alert = ({txtMainHeading,customClassName,txtSubHeading,alertStyles}) => {\n    return (\n        <div className={`${alertStyles.alertDangerContainer} ${customClassName}`}>\n            <span className={alertStyles.alertDangerHeading}>{txtMainHeading}</span>\n            <span className={alertStyles.alertDangerInfo}>{txtSubHeading}</span>\n        </div>\n    )\n}\n\n\nexport {\n    Alert\n}","import React, { useEffect, useState } from 'react'\nimport styles from './styles.module.css'\n\nimport { Alert } from './components'\n\nexport const ReactInternetSpeedMeter = ({\n  txtMainHeading = 'Opps...',\n  outputType = 'alert',\n  customClassName,\n  pingInterval = 30000,\n  thresholdUnit = 'megabyte',\n  threshold = 7,\n  txtSubHeading = 'Diconnected from internet',\n  imageUrl,\n  downloadSize, //bytes\n  callbackFunctionOnNetworkDown = () => console.log('No callback on Network Down'),\n  callbackFunctionOnNetworkTest = () => console.log('No callback On Network test'),\n  callbackFunctionOnError = () => console.log('error in downloading image')\n}) => {\n  const [isNetworkDown, setisNetworkDown] = useState(false)\n  let intervalFun\n\n  window.addEventListener('offline', () => setisNetworkDown(true));\n  window.addEventListener('online', () => setisNetworkDown(false));\n\n  const startCalculating = () => {\n    return window.setTimeout(MeasureConnectionSpeed, pingInterval);\n  }\n\n  useEffect(() => {\n    intervalFun = startCalculating()\n    return () => window.clearInterval(intervalFun)\n  }, [])\n\n  const MeasureConnectionSpeed = () => {\n    var startTime, endTime;\n    var download = new Image();\n    startTime = (new Date()).getTime();\n\n    var cacheBuster = '?nnn=' + startTime;\n    download.src = imageUrl + cacheBuster;\n\n    download.onload = function (d) {\n      endTime = (new Date()).getTime();\n      showResults(startTime, endTime);\n    }\n\n    download.onerror = function (err, msg) {\n      console.log('err', err)\n      callbackFunctionOnError(err)\n      window.clearInterval(intervalFun)\n    }\n    startCalculating()\n  }\n\n  const showResults = (startTime, endTime) => {\n    const duration = (endTime - startTime) / 1000;\n\n    const bitsLoaded = downloadSize * 8;\n    const speedBps = (bitsLoaded / duration).toFixed(2);\n    const speedKbps = (speedBps / 1024).toFixed(2);\n    const speedMbps = (speedKbps / 1024).toFixed(2);\n\n    setNetworStatus(speedBps, speedKbps, speedMbps)\n  }\n\n  const setNetworStatus = (speedBps, speedKbps, speedMbps) => {\n    if (thresholdUnit === 'byte') {\n      if (speedBps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedBps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedBps)\n    }\n    else if (thresholdUnit === 'kilobyte') {\n      if (speedKbps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedKbps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedKbps)\n\n    }\n    else if (thresholdUnit === 'megabyte') {\n      if (speedMbps < threshold) {\n        setisNetworkDown(true)\n        callbackFunctionOnNetworkDown(speedMbps)\n      } else {\n        setisNetworkDown(false)\n      }\n      callbackFunctionOnNetworkTest(speedMbps)\n\n    }\n    else {\n      console.log('Invalid thresholdUnit')\n    }\n  }\n\n  if (isNetworkDown) {\n    if (outputType === 'alert') {\n      return <Alert\n        alertStyles={styles}\n        customClassName={customClassName}\n        txtMainHeading={txtMainHeading}\n        txtSubHeading={txtSubHeading} />\n    }\n\n    return <div />\n  }\n  return <div />\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}