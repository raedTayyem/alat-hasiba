import React, { Component } from "react";
import { Helmet } from "react-helmet-async";
import "./AgeCalculator.scss";
import Person from "./Person";

export default class AgeCalculator extends Component {
  constructor() {
    super();
    this.units = {
      milliseconds: {
        factor: 1,
        label: "ูููู ุซุงููุฉ",
      },
      seconds: {
        factor: 1000,
        label: "ุซุงููุฉ",
      },
      minutes: {
        factor: 1000 * 60,
        label: "ุฏูููุฉ",
      },
      hours: {
        factor: 1000 * 60 * 60,
        label: "ุณุงุนุฉ",
      },
      days: {
        factor: 1000 * 60 * 60 * 24,
        label: "ููู",
      },
      weeks: {
        factor: 1000 * 60 * 60 * 24 * 7,
        label: "ุฃุณุจูุน",
      },
      months: {
        factor: 1000 * 60 * 60 * 24 * 30.4,
        label: "ุดูุฑ",
      },
      years: {
        factor: 1000 * 60 * 60 * 24 * 365,
        label: "ุนุงู",
      },
      marsyears: {
        factor: 1000 * 60 * 60 * 24 * 687,
        label: "ุนุงู ูุฑูุฎู",
      },
    };
    this.state = { persons: [] };
  }

  componentDidMount() {
    this.handleUnitChange();
  }

  submit = (event) => {
    event.preventDefault();
    var name = document.querySelector("[name=name]").value;
    var birthDate = document.querySelector("[name=birthday]").value;
    var birthTime = document.querySelector("[name=birthtime]").value;
    var hash = Math.random() * 10000000000000000;
    var persons = this.state.persons.concat(
      <Person
        key={hash}
        id={hash}
        name={name}
        birthDate={birthDate}
        birthTime={birthTime}
        getFactor={this.getFactor}
        getUnitLabel={this.getUnitLabel}
        remove={() => {
          this.removePerson(hash);
        }}
      />
    );

    this.setState({
      persons,
    });

    document.getElementById("form").reset();
  };

  removePerson(id) {
    var really = window.confirm(
      `ูู ุชุฑูุฏ ุฅุฒุงูุฉ ${
        this.state.persons.find((person) => person.props.id === id).props.name
      } ูู ุงููุงุฆูุฉ?`
    );
    if (really) {
      var persons = this.state.persons.filter(
        (person) => person.props.id !== id
      );
      this.setState({
        persons,
      });
    }
  }

  getFactor = () => {
    return this.units[this.state.unit].factor;
  };

  getUnitLabel = () => {
    return this.units[this.state.unit].label;
  };

  handleUnitChange = () => {
    var unit = document.querySelector("[name=unit]").value;
    this.setState({
      unit,
    });
  };

  render() {
    return (
      <>
      <Helmet>
        <title>ุญุณุงุจ ุงูุนูุฑ</title>
        <meta name="description" content="ุงูุญูุงุฉ ูุบุงูุฑุฉ ููู ุดุฎุต" />
        <link rel="canonical" href="/ููู ุงุญุณุจ ุนูุฑู" />
      </Helmet>
      <div className="main-app">
        <div className="AgeCalculator" onSubmit={this.submit}>
          <h1>ุขูุฉ ุญุงุณุจุฉ ุงูุนูุฑ</h1>
          <div className="forms">
            <form id="form">
              <label>
                <span>ุงูุงุณู: </span>
                <input type="text" name="name" required />
              </label>
              <label>
                <span>ุนูุฏ ุงููููุงุฏ: </span>
                <input type="date" name="birthday" required />
                <input type="time" name="birthtime" required />
              </label>
              <div className="formFooter">
                <button type="submit" className="submit">
                  <span role="img" aria-labelledby="Add">
                    โ ุงุถุงูู
                  </span>
                </button>
                <button type="reset" className="reset">
                  {" "}
                  <span role="img" aria-labelledby="Reset">
                    ๐
                  </span>{" "}
                  ุฅุนุงุฏุฉ ุชุนููู
                </button>
              </div>
            </form>
            <form>
              <label>
                <span>ูุญุฏุฉ: </span>
                <select name="unit" onChange={this.handleUnitChange}>
                  {Object.entries(this.units).map(([key, value]) => (
                    <option value={key} name={key}>
                      {value.label}
                    </option>
                  ))}
                </select>
              </label>
            </form>
          </div>
          <div className="persons">
            {this.state.persons.map((person) => person)}
          </div>
        </div>
        <h3>
            ุงูุญูุงุฉ ูุบุงูุฑุฉ ููู ุดุฎุต. ุฅููุง ุฑุญูุฉ ุฑุงุฆุนุฉ ุชุฌุนููุง ูุชุนูู ุทูุงู ุญูุงุชูุง.
            ุงููุงุณ ูุดูุฎูู ููููุชูู ูู ูุฌุฑู ุญูุงุชูู. ูุฏููู ุชุฌุงุฑุจ ูุฎุชููุฉ ุจูุงุกู ุนูู
            ุนุฏุฏ ุงูุณููุงุช ุงูุชู ูุนูุดูููุง. ุชุณุงุนุฏู ุญุงุณุจุฉ ุงูุนูุฑ ุนูู ุชูุฏูุฑ ุนูุฑู ุจูุงุกู
            ุนูู ุนุฏุฏ ุงูุณููุงุช ุงูุชู ุนุดุชูุง.{" "}
            {" "}
            ูุญุณุงุจ ุนูุฑ ุดุฎุต ูุง ุ ูุณุชุฎุฏู ุงููุงุณ ุฃููุงู ุขูุฉ ุญุงุณุจุฉ ููุนูุฑ. ุชูุณุชุฎุฏู
            ุงูุขูุงุช ุงูุญุงุณุจุฉ ููุนูุฑ ูุชูุฏูุฑ ุงูุนูุฑ ูุฃูุถูุง ูุชุญุฏูุฏ ูุชูุณุท โโุนูุฑ ูุฌููุนุฉ
            ูุนููุฉ ูู ุงูุฃุดุฎุงุต. ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุงุณุชุฎุฏุงู ุขูุฉ ุญุงุณุจุฉ ููุนูุฑ
            ูุชูุฏูุฑ ุนูุฑ ูุฌููุนุฉ ูู ุฃุทูุงู ุงููุฏุงุฑุณ ุฃู ูุญุณุงุจ ูุชูุณุท โโุนูุฑ ูุฌููุนุฉ ูู
            ุงูููุธููู. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุนุฏ ุงุณุชุฎุฏุงู ุญุงุณุจุฉ ุงูุนูุฑ ูููุฏูุง ุนูุฏ ุญุณุงุจ
            ุนูุฑ ุดุฎุต ูุง ูู ุงูุฃูุงูู ุงูุนุงูุฉ ุฃู ุนูุฏ ุงูุชูุงุนู ูุน ูุฐุง ุงูุดุฎุต. ุนูู ุณุจูู
            ุงููุซุงู ุ ุฅุฐุง ุณุฃู ุฃุญุฏูู ุนูุฑู ููู ุชูู ูุฑุชุงุญูุง ููุฅุฌุงุจุฉ ุ ูููููู ุชูุฏูุฑ
            ุนูุฑู ูุชุฃููุฏ ุฅุฌุงุจุชู ูู ุฎูุงู ููุงุฑูุชู ุจุชูุฏูุฑู. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุนุฏ
            ุงุณุชุฎุฏุงู ุงูุขูุฉ ุงูุญุงุณุจุฉ ููุนูุฑ ูููุฏูุง ุนูุฏ ุงูุชูุงุนู ูุน ูุจุงุฑ ุงูุณู ูุฃูู
            ููุธูุฑ ุงุญุชุฑุงูู ูุฃุนูุงุฑูู ูุฎุจุฑุงุชูู ูู ุฎูุงู ุชุฒููุฏู ุจุฃุนูุงุฑูู ุงูุฏูููุฉ. - -
            ูููุง ููู ุจุนุถ ุงูุฃูุซูุฉ ุนู ููููุฉ ุงุณุชุฎุฏุงู ุญุงุณุจุฉ ุงูุนูุฑ: *** ** ูุนุฏ
            ุงุณุชุฎุฏุงู ุญุงุณุจุฉ ุงูุนูุฑ ููุฑุฉ ุฌูุฏุฉ ูุฃููุง ุชุณุงุนุฏู ุนูู ุชูุฏูุฑ ุนูุฑ ุดุฎุต ูุง
            ูุฅุธูุงุฑ ุงุญุชุฑุงูู ูุฐูู ุงูุดุฎุต ูู ุฎูุงู ุชูุฏูู ุนูุฑู ุจุงูุถุจุท. ุงูุฑูู 84321
            ููุซู ุชุนุจูุฑ "ุงูุนูุฑ" ุจุงููุบุฉ ุงูุนุฑุจูุฉ. ููุง ุฐูุฑูุง ุณุงุจููุง ุ ูุชู ุงุณุชุฎุฏุงู
            ุขูุฉ ุญุงุณุจุฉ ููุนูุฑ ูุชูุฑูุจ ุนูุฑ ุงููุฑุฏ ูุฃูุถูุง ูุชุญุฏูุฏ ูุชูุณุท โโุนูุฑ ูุฌููุนุฉ ูู
            ุงูุฃุดุฎุงุต. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุนุฏ ุงุณุชุฎุฏุงู ุญุงุณุจุฉ ุงูุนูุฑ ูููุฏูุง ุนูุฏ ุญุณุงุจ
            ุนูุฑ ุดุฎุต ูุง ูู ุงูุฃูุงูู ุงูุนุงูุฉ ุฃู ุนูุฏ ุงูุชูุงุนู ูุน ูุฐุง ุงูุดุฎุต. ููุซูุง:
        </h3>
      </div>
      </>
    );
  }
}
